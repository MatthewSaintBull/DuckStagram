"use strict";let image=null;const filters=[{name:"Normal",value:"reset-filter",filter:""},{name:"Aden",value:"filter-aden",filter:"sepia(.2) brightness(1.15) saturate(1.4)"},{name:"1977",value:"filter-1977",filter:"sepia(.5) hue-rotate(-30deg) saturate(1.4)"},{name:"Amaro",value:"filter-amaro",filter:"sepia(.35) contrast(1.1) brightness(1.2) saturate(1.3)"},{name:"Ashby",value:"filter-ashby",filter:"sepia(.5) contrast(1.2) saturate(1.8)"},{name:"Brannan",value:"filter-brannan",filter:"sepia(.4) contrast(1.25) brightness(1.1) saturate(.9) hue-rotate(-2deg)"},{name:"Brooklyn",value:"filter-brooklyn",filter:"sepia(.25) contrast(1.25) brightness(1.25) hue-rotate(5deg)"}];let applied_filter="";const loadFilters=()=>{const e=document.getElementById("dropDownItems");filters.map(t=>{const a=document.createElement("button");a.addEventListener("click",e=>handleSelectionFilter(e)),a.appendChild(document.createTextNode(t.name)),a.classList.add("dropdown-item"),a.value=t.value,e.appendChild(a)})},checkExtension=e=>new Promise((t,a)=>{e=e.split(";");["data:image/jpeg","data:image/png"].includes(e[0])?t():a("Filetype not valid")});document.getElementById("add-image").onchange=function(){applied_filter&&document.getElementById("image").classList.remove(applied_filter);var e=new FileReader;e.onload=function(e){checkExtension(e.target.result).then(t=>{document.getElementById("image").src=e.target.result,document.getElementById("image").style.display="flex",document.getElementById("preview-text").style.display="none",document.getElementById("preview-filters").style.display="flex",image=e.target.result}).catch(e=>e)},e.readAsDataURL(this.files[0])};const applyFilter=e=>new Promise((t,a)=>{var l=new Image;l.crossOrigin="",l.src=document.getElementById("image").src,l.onload=function(){var l=document.getElementById("imageCtx"),n=l.getContext("2d");l.width=document.getElementById("image").naturalWidth,l.height=document.getElementById("image").naturalHeight,void 0!==n.filter?(n.filter=e.filter,n.drawImage(this,0,0),t()):(n.drawImage(this,0,0),t()),a("error applying filter, please make sure the format is correct")}}),handleSelectionFilter=e=>{const t=_.find(filters,t=>t.value===e.target.value);applied_filter&&document.getElementById("image").classList.remove(applied_filter),applyFilter(t).then(e=>{document.getElementById("image").classList.add(t.value),document.getElementById("download").style.display="flex",applied_filter=t.value}).catch(e=>console.log(e))},download=()=>{saveAs(document.getElementById("imageCtx").toDataURL("image/jpeg"),"duckstagrammed.jpg")};